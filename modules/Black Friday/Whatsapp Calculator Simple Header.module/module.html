<div class="bf-whatsapp-calculator" id="bf-calculator-section">
  <div class="container">
    <div class="bf-calculator-wrapper">
      <div class="calculator-header">
        <div class="inner-flex">
          <div class="heading">
            <!-- Label -->
            <div class="label-section" style="{{ module.style.spacing_field.css }}">
              <div class="heading-label" style="color: {{ module.label_group.label_color.css }}; background-color: {{ module.label_group.label_background_color.css }};">
                {{ module.label_group.label_text }}
              </div>
            </div>
            <!-- Title -->
            {{ module.heading_title }}
            <!-- Sub Text -->
            <span class="description">{{ module.heading_subtitle }}</span>            
          </div>
          <div class="heading-image">
            {% if module.heading_image.src %}
            {% set sizeAttrs = 'width="{{ module.heading_image.width }}" height="{{ module.heading_image.height }}"' %}
            {% if module.heading_image.size_type == 'auto' %}
            {% set sizeAttrs = 'width="{{ module.heading_image.width }}" height="{{ module.heading_image.height }}" style="max-width: 100%; height: auto;"' %}
            {% elif module.heading_image.size_type == 'auto_custom_max' %}
            {% set sizeAttrs = 'width="{{ module.heading_image.max_width }}" height="{{ module.heading_image.max_height }}" style="max-width: 100%; height: auto;"' %}
            {% endif %}
            {% set loadingAttr = module.heading_image.loading != 'disabled' ? 'loading="{{ module.heading_image.loading }}"' : '' %}
            <img src="{{ module.heading_image.src }}" alt="{{ module.heading_image.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
            {% endif %}
          </div>
        </div>
      </div>
      <div class="calculator-functional">
        <div class="row-form">
          <div class="bf-form">
            <div class="form-intro-text">
              {{ module.form_content.form_content }}
            </div>
            <!-- WA Subscriber base -->
            <div class="form-group">
              <div class="input-placeholder">
                <input type="text" id="curr-sub-base" class="formated-number" oninput="formatInput(this)" />
                <span>#</span>
              </div>
            </div>
            <!-- Email Subscribers -->
            <div class="form-group">
              <label class="hide-label">{{ module.form_content.email_subscribers_label }}</label>
              <div class="input-placeholder">                
                <input type="text" id="email-sub-base" class="formated-number" placeholder="e.g. 30,000" oninput="formatInput(this)" />
                <span>#</span>
              </div>
            </div>
            <!-- Website Visitors -->
            <div class="form-group">
              <label class="hide-label">{{ module.form_content.website_visitors_label }}</label>
              <div class="input-placeholder">                
                <input type="text" id="website-visitors" class="formated-number" placeholder="e.g. 15,000" oninput="formatInput(this)" />
                <span>#</span>
              </div>
            </div>
          </div>
          <div class="bf-form-results">
            <div class="inner-results">
              <div class="result-one">
                <label>{{ module.form_content.subscribers_per_year_label }}</label>
                <div id="calc-subscribers-results" data-placeholder="3,600"></div>
              </div>
              <div class="result-two">
                <label>{{ module.form_content.extra_subscribers_label }}</label>
                <div id="calc-amount-results" data-placeholder="â‚¬122,400"></div>   
                <div class="how-to-calculate">
                  {% set href = module.form_content.how_it_works_url.url.href %}
                  {% if module.form_content.how_it_works_url.url.type is equalto "EMAIL_ADDRESS" %}
                  {% set href = "mailto:" + href %}
                  {% endif %}
                  <a href="{{ href }}"
                     {% if module.form_content.how_it_works_url.open_in_new_tab %}target="_blank"{% endif %}
                     {% if module.form_content.how_it_works_url.rel %}rel="{{ module.form_content.how_it_works_url.rel }}"{% endif %}
                     >
                    {{ module.form_content.how_it_works_label }}
                  </a>
                </div>
              </div>

              <div class="text-center">
                {% set href = module.get_started.url.href %}
                {% if module.get_started.url.type is equalto "EMAIL_ADDRESS" %}
                {% set href = "mailto:" + href %}
                {% endif %}
                <a href="{{ href }}" class="btn-get-started" id="{{ module.get_started_id }}"
                   {% if module.get_started.open_in_new_tab %}target="_blank"{% endif %}
                   {% if module.get_started.rel %}rel="{{ module.get_started.rel }}"{% endif %}
                   >
                  {{ module.cta_button_label }}
                  <i></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function formatInput(inputElement) {
    // Get the current cursor position
    //     const cursorPosition = inputElement.selectionStart;

    // Get the input value and remove existing commas
    let value = inputElement.value.replace(/,/g, '');

    // Format the value with commas
    value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ',');

    // Update the input's value attribute
    inputElement.value = value;

    // Place the cursor at the end of the input
    inputElement.setSelectionRange(value.length, value.length);
  }
</script>