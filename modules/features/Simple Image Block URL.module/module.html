<div class="image-container {{ module.custom_id }}" id="{{ module.custom_id }}" style="max-width: {{ module.container_width }}; text-align: {{ module.style.alignment.css }};">
  {% set href = module.image_url.url.href %}
  {% if module.image_url.url.type is equalto "EMAIL_ADDRESS" %}
  {% set href = "mailto:" + href %}
  {% endif %}
  <a href="{{ href }}" id="{{ module.custom_id }}"
     {% if module.image_url.open_in_new_tab %}target="_blank"{% endif %}
     {% if module.image_url.rel %}rel="{{ module.image_url.rel }}"{% endif %}
     >
    {% if module.image_field.src %}
    {% set sizeAttrs = 'width="{{ module.image_field.width }}" height="{{ module.image_field.height }}"' %}
    {% if module.image_field.size_type == 'auto' %}
    {% set sizeAttrs = 'width="{{ module.image_field.width }}" height="{{ module.image_field.height }}" style="max-width: 100%; height: auto;"' %}
    {% elif module.image_field.size_type == 'auto_custom_max' %}
    {% set sizeAttrs = 'width="{{ module.image_field.max_width }}" height="{{ module.image_field.max_height }}" style="max-width: 100%; height: auto;"' %}
    {% endif %}
    {% set loadingAttr = module.image_field.loading != 'disabled' ? 'loading="{{ module.image_field.loading }}"' : '' %}
    <img src="{{ module.image_field.src }}" alt="{{ module.image_field.alt }}" {{ loadingAttr }} {{ sizeAttrs }} style="margin: {{ module.margins }};">
    {% endif %}
  </a>

</div>